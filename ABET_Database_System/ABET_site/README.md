ABET Server Guide

The ABET Server is designed to streamline and expedite the ABET evaluation process for instructors, minimizing stress and time consumption. As most schools, including ours, utilize Canvas for course storage, integrating our system with Canvas seemed logical. Leveraging Canvas outcomes, which allow the creation of diverse outcomes linked directly to assignments, was key. To gain a better understanding of Canvas and its outcomes, refer to informative videos provided below. Additionally, we've established a special Admin account with access to all courses involved in the ABET evaluation process.

Importing Outcomes
Our system interacts with Canvas through its API, using a personal access token generated by the admin account. This token acts as a password, enabling the system to retrieve and input data directly into Canvas. To import outcomes into different courses, navigate to the 'ABET_import_outcomes' folder. Inside, find the 'import_outcomes.py' Python file and 'outcome_import_CSV_files' folder. Each .csv file within this folder contains outcome data for specific courses. An example .csv file is provided for reference. Run the script by providing the API personal access token and the API link to your school's Canvas API. If unsure about the course number, find it in the course shell URL. Running this script connects to the Canvas API, importing outcomes directly into the respective courses.



Exporting Outcomes Results
The essential files required for exporting outcomes are in the 'ABET_outcome_export' folder. Inside this folder, there are three scripts: 'Canvas_API_functions.py,' 'Canvas_Graph_functions.py,' and 'export_outcomes.py.' Both 'Canvas_API_functions.py' and 'Canvas_Graph_functions.py' contain functions utilized within the 'export_outcomes.py' script.
Canvas_API_functions.py encompasses functions responsible for extracting outcome data from Canvas. It includes supplementary information such as student IDs and login names, vital for further data segregation. Additionally, this script includes a function that creates directories to store the outcome results. These directories use timestamps to organize submissions by year and semester. Modification of month and day values allows customization to align with your institution's semester timelines.
Functions:
get_page: Retrieves various pieces of data from the Canvas API and returns the data in Json format. It accepts 4 parameters: url (The Canvas API_URL),headers (The header used in the get request), specificic_ids (any type of specific id depending on the type of request this can be outcome_ids, course_ids, etc..), type_lookup (This is the type of lookup you want to preform: either: courses outcome, or outcome_info)
get_outcome_results: filters through the outcome results data obtained from Canvas API and appends it to the end of a dataframe. It also append the course name and ID to the end of the the course_ID and course_name arrays to be later used for future lookups. The function accepts 7 parameters: header (header used in the get request), url (The Canvas API_URL), course_data (stores all of the information about each course) outcome_results_data (the .json response you obtained from the get request for outcome results), dataframe(The dataframe all the data is being placed into), course_name_arr (the array that stores the different course names), course_ID_arr (the array that stores the course ID's)
get_outcome_info: grabs outcome information from canvas for a specific outcome.Then extracts the learning outcome name for that outcome and appends the value to an array to be later appended onto the dataframe. This is so we can extract the outcome name for each outcome submission. It accepts 5 parameters: header (header used in the get request), url (The Canvas API_URL for University of Michigan Flint) outcome_student_results (the outcome results data for a single submission), outcome_name_arr(array the outcome names get appended to), and data_frame(The dataframe all the data is being placed into)


get_UMID_data: obtains the students enrollment info from a specific course using the get_page function to grab a specific courses enrollment info for all students in the class. If there is data it then places it into a dataframe (UMID_id) for temporary storage. Each time the function is called it appends the new enrollment info stored in the temp array (UMID_id) to an array (UMID_id_dataframe) containing the enrollment info for all courses. It then resets the index and returns the dataframe containing the enrollment info (UMID_id_dataframe) It accepts 4 parameters, url (The Canvas API_URL), header (header used in the get request), course_identifer(the id for the course) and UMID_id_dataframe(the dataframe storing the students UMID and enrollment information)
clean_UMID_data: used to clean up the dataframe containing all of the studentâ€™s enrollment information. It deletes all unnecessary data by only keeping two columns, one storing the canvas Id for each student and the other storing the UMID for each Student. This allows for a later function to compair the dataframe containg the student outcome information with this dataframe containing the student UMID's by their Canvas id. It then drops all duplicates since students might be in more than one of the classes and resets the index, finally returning the cleaned-up array. It accepts 1 parameter UMID_ids_df (the dataframe storing the UMID and enrollment info for each student).
match_UMID_data: used to compair the canvas ID's stored in both the outcome results dataframe (outcome_results_df) and the UMID id's dataframe UMID_ids_arr returning the UMID_ID from the UMID id's dataframe if the canvas id in the outcome results dataframe matches the canvas id in the UMID id dataframe. It accepts 3 parameters UMID_ids_df (the dataframe storing the UMID and enrollment info for each student) outcome_results_df (the dataframe storing the outcome results) and num_rows_for_outcome_arr (the number indicating the position of the row we want to look up the canvas id for in the outcome_results_df)
file_orginization: creates a directory to store the outcome results .csv file and the graph images. It does this by taking the time stamp from one outcome submission and taking the month, day, and year out of it. It then compares the month and day to determine the semester the evaluation took place. It then creates two folders, one for the year if it does not already exist, and inside of the year folder it creates another folder for each semester, if one is not already created. It then returns the directory path.

The Canvas_Graph_functions.py houses functions involved in creating various graphs and charts using the outcome data obtained from Canvas. These functions generate three distinct types of visualizations: stacked bar graphs, regular bar graphs, and pie charts for each outcome. The bar graphs encapsulate data for all outcomes in the course, while each outcome has an associated pie chart. Both the pie and stacked bar graphs display the percentage distribution of students across four different levels: beginner, apprentice, proficient, and exemplary. Additionally, these functions organize generated images into 'bar_graph' or 'pie_chart' folders within storage and website directories to enhance data organization.
Functions:
bargraph: Creates the bar graph using the outcome data. It accepts 3 parameters. 
outcomeDataframe: which is the data frame that the outcome results are stored in.
storage_directory_path: the directory path that is used to store the outcome results .csv file as well as all of the graphs and charts being produced. Used for main and backup storage.
website_directory_path: the directory path that is used to store the images of the graphs and charts to be pulled to be displayed on the web server.

piechart: Creates the pie charts for each outcome using the outcome data. It accepts 3 parameters. 
outcomeDataframe: which is the data frame that the outcome results are stored in.
storage_directory_path: the directory path that is used to store the outcome results .csv file as well as all of the graphs and charts being produced. Used for main and backup storage.
website_directory_path: the directory path that is used to store the images of the graphs and charts to be pulled to be displayed on the web server.

stackedbar_graph: Creates the stacked bar graph using the outcome data. It accepts 3 parameters. 
outcomeDataframe: which is the data frame that the outcome results are stored in.
storage_directory_path: the directory path that is used to store the outcome results .csv file as well as all of the graphs and charts being produced. Used for main and backup storage.
website_directory_path: the directory path that is used to store the images of the graphs and charts to be pulled to be displayed on the web server.

The export_outcomes.py function calls the functions provided within the canvas_API_functions.py and canvas_graph_functions.py to extract the outcome data from the Canvas API, build a data frame using that data and use that dataframe to create different charts and graphs showcasing that data. They also export the data contained in a .csv file and the .png images of the graphs/charts to the ABET_export_outcomes directory (for storage and as a backup) as well as to the static/images folder that is in the ABET_site folder (to be pulled to be used within the webserver.)

Website
The final folder is the ABET_site folder. Inside it contains a python script app.py and a folder named templates which an html file inside named template.html. These two scripts build the foundations for the webserver that the ABET outcome results are displayed to. Right now you can run the webserver by executing the app.py script and copy and pasting the link to your browser. Right now, only the computer running the script will be able to access the webpage. You will need to attach it to a webserver like Apache. 

The webserver works with the user being able to select files they want. There are 4 drops down menus. The first is to select the year the data was submitted, the next for the semester, the third is the type of graph/chart they want to see, either pie or bar, and the last is to select the graph/chart.

The functions within the python script fetch the files in each folder. The html script builds the website and controls the size and display of the images.


Helpful Videos and Articles

How to add outcomes to course (manual route)
https://www.youtube.com/watch?v=PVR0gUCzIlY

Describing a little more in details Canvas Outcomes
https://community.canvaslms.com/t5/Canvas-Basics-Guide/What-are-Outcomes/ta-p/75

Canvas API docs
https://canvas.instructure.com/doc/api/


